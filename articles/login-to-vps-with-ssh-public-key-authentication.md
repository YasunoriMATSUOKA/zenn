---
title: "VPSへED25519鍵を用いてSSH公開鍵認証でログインする方法の覚書"
emoji: "🔑"
type: "tech"
topics: ["ssh", "ed25519", "vps", "ubuntu"]
published: false
---

## 概要

1. ローカル側での作業
    1. ED25519秘密鍵、公開鍵のキーペアを生成
1. サーバー側での作業
    1. rootユーザーでSSHでパスワードログイン
    1. サーバー上でroot以外の実行用ユーザーを作成
    1. 実行用ユーザーをsudoグループに追加
    1. サーバーに実行用ユーザーでSSHでパスワードログイン
    1. 実行用ユーザーのホームディレクトリに`~/.ssh`ディレクトリ作成
    1. `~/.ssh`ディレクトリのパーミッションを700に変更
    1. ローカルの公開鍵ファイル`~/.ssh/id_ed25519.pub`をサーバー上の`~/.ssh/authorized_keys`ファイルとして配置
    1. サーバー上に配置した公開鍵ファイル`~/.ssh/authorized_keys`ファイルのパーミッションを600に変更
1. ローカルからサーバーへ公開鍵認証で実行用ユーザーでログインできるか確認
1. セキュリティ向上のための設定
    1. `/etc/ssh/sshd_config`を開き
    1. SSHのポートをデフォルトの22から変更
    1. SSHでのrootユーザーのログインを禁止
    1. SSHでのパスワード認証でのログインを禁止
    1. sshdをリスタート
